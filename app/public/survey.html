<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Servey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="css/style.css"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<style>
    body{
        font-family: 'Roboto', sans-serif;
    }
    .container1{
        font-size: 18px;
        background-color: rgb(253, 251, 235);
       
        padding: 40px;
    }
    .title-header{
        height: 50vh;
        /* background-image: url("./images/friendsbackground.jpg"); */
        background: linear-gradient(rgba(50,50,25,0.4), rgba(5,5,25,0.5)), url("./images/friendsbackground.jpg");
        background-size: cover;
        margin: auto;
        position: relative;
    }
    .title-header h2{
        font-size: 40px;
    }
    .row{
        text-align: center;
        position: relative;
        top: 30%;
        color:rgb(218, 246, 250);
        
    }
    h2,h3{
        font-family: 'Jaldi', serif;
    }
    
    h4, .select-container{
        text-indent: 20px;
    }
   .chosen-select{
       padding: 5px;
       
   }
   .btn{
       margin-left: 20px;
       background-color: rgb(96, 205, 248);
       font-weight: bold;
       font-size: 20px;
   }
   .btn:hover{
       font-size:22px;
       color: rgb(91, 91, 92);
   }
   p{
       padding: 10px;
       font-size: 16px;
   }
    #error-message{
        color: red;
    }
</style>
</head>
<body>
    <div class="container">
        <div class="container1 col-6">
            <div class="title-header">
                <div class="row">
                    <h2><b>Servey Questions</b></h2>
                </div>
            </div>
            
            <hr class="my-4">
            <form>
                <div>
                    <h3><b>About You</b></h3>
                    <div id="error-message"></div>
                    <div class="form-group">
                            <label for="name"><h4>Name (Required)</h4></label>
                            <input type="text" class="form-control" id="name"  placeholder="name">
                            
                    </div>
                    <div class="form-group">
                            <label for="linktophoto"><h4>Link to Photo Image (Required)</h4></label>
                            <input type="text" class="form-control"  id="linktophoto" >
                            
                    </div>
                </div>
            </form>
            <hr class="my-4">
            <form>
                <div class="form-group  question1">
                    <h3>Question 1</h3>
                    <h4>Your mind is always buzzing with unexplored ideas and plans.
                    </h4>
                </div>
                <div class="form-group select-container answer1">
                    <!-- <label for="selection-1">Select an Option</label> -->
                    <select class="chosen-select" id="selection-1">
                        <option value="" disabled selected>Select an Option</option>
                        <option value="1">1(Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5(Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group question2">
                    <h3>Question 2</h3>
                    <h4>Generally speaking, you rely more on your experience than your imagination.
                        </h4>
                    </div>
                    <div class="form-group select-container answer2">
                    <!-- <label for="selection-1">Select an Option</label> -->
                    <select class="chosen-select" id="selection-2">
                        <option value="" disabled selected>Select an Option</option>
                        <option value="1">1(Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5(Strongly Agree)</option>
                    </select>
                </div>
                <div class="form-group question3">
                    <h3>Question 2</h3>
                    <h4>Generally speaking, you rely more on your experience than your imagination.
                        </h4>
                    </div>
                    <div class="form-group select-container answer3">
                    <!-- <label for="selection-1">Select an Option</label> -->
                    <select class="chosen-select " id="selection-3">
                        <option value="" disabled selected>Select an Option</option>
                        <option value="1">1(Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5(Strongly Agree)</option>
                    </select>
                </div>
                <div class="form-group question4">
                    <h3>Question 3</h3>
                    <h4>You rarely do something just out of sheer curiosity.

                        </h4>
                    </div>
                    <div class="form-group select-container answer4">
                    <!-- <label for="selection-1">Select an Option</label> -->
                    <select class="chosen-select" id="selection-4">
                        <option value="" disabled selected>Select an Option</option>
                        <option value="1">1(Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5(Strongly Agree)</option>
                    </select>
                </div>
            </form>

            <button id= "submit" class="btn  btn-lg ">Submit</button>
            <hr>
            

        </div>
        <footer class="footer">
                <div class="container">
                    <p><a  href = "/">Home</a> | <a  href = "api/friends">Api Friends List </a></p>
                </div>
        </footer>
    <!-- Modal -->
    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                <h2 id="match-name"></h2>
                <img id="match-img" src="http://lorempixel.com/400/200/" alt="">
                </div>
                <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
        
 </div>
    
    
    
</body>
<script type= "text/javascript">
    //if submit click get all user input and assign to a variable
    $("#submit").on("click",function(event){
        event.preventDefault();
                        
        //Form Validation
        function validateForm() {
        var isValid = true;
        $(".form-control").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });

        
        return isValid;
      }
      if(validateForm()){
        //user input 
        var userInput={
            name : $("#name").val(),
            Photo : $("#linktophoto").val(),
            scores :[
            $("#selection-1").val(),
            $("#selection-2").val(),
            $("#selection-3").val(),
            $("#selection-4").val()
            ]
        };
            $("#name").val(""),
            $("#linktophoto").val(""),
            $("#selection-1").val(""),
            $("#selection-2").val(""),
            $("#selection-3").val(""),
            $("#selection-4").val("")
        
        $.post("/api/friends", userInput , function(data){
            console.log("ttttttttttttttt"+data.photo)
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);
            //show the modal with best match
            $("#results-modal").modal("toggle");
            console.log("result data : "+ JSON.stringify(data.name))
        
        });
        
    }else{
        $("#error-message").text("Please fill out all fields before submitting!");
    }

    });
    
</script>
</html>